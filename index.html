<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carbon Offset Survey</title>
</head>

<body>
    <h1>Carbon Offset Survey</h1>

    <!-- Your Form -->
    <form id="carbonOffsetForm">
        <!-- Car Travel Details -->
        <label for="carSize">Car Size:</label>
        <input type="text" id="carSize" name="carSize" required>

        <label for="fuelType">Fuel Type:</label>
        <input type="text" id="fuelType" name="fuelType" required>

        <label for="travelDistance">Travel Distance:</label>
        <input type="number" id="travelDistance" name="travelDistance" required>

        <label for="distanceUnit">Distance Unit:</label>
        <select id="distanceUnit" name="distanceUnit" required>
            <option value="km">Kilometers</option>
            <option value="miles">Miles</option>
        </select>

        <!-- Surf Product Purchases -->
        <label for="waxBlocks">Wax Blocks Purchased:</label>
        <input type="number" id="waxBlocks" name="waxBlocks">

        <label for="wetsuits">Wetsuits Purchased:</label>
        <input type="number" id="wetsuits" name="wetsuits">

        <label for="surfboards">Surfboards Purchased:</label>
        <input type="number" id="surfboards" name="surfboards">

        <!-- Submit Button -->
        <button type="submit">Calculate Emissions</button>
    </form>

    <!-- Result Display -->
    <div id="result"></div>

    <!-- JavaScript to Handle Form Submission -->
    <script>
        async function handleFormSubmit(event) {
            event.preventDefault(); // Prevent form from reloading the page

            // Collect form data
            const formData = {
                carSize: document.querySelector('#carSize').value,
                fuelType: document.querySelector('#fuelType').value,
                travelDistance: document.querySelector('#travelDistance').value,
                distanceUnit: document.querySelector('#distanceUnit').value,
                waxBlocks: document.querySelector('#waxBlocks').value || 0,
                wetsuits: document.querySelector('#wetsuits').value || 0,
                surfboards: document.querySelector('#surfboards').value || 0
            };

            try {
                // Fetch request to Make.com
                const response = await fetch('https://hook.eu2.make.com/kwrobdamrwxbp6o2i1a1rckwem1xtovq', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });

                const data = await response.json();

                // Display the results
                document.getElementById('result').innerHTML = `
                    <h2>Carbon Emissions Report</h2>
                    <p>Wax Emissions: ${data.wax_kgCO2e} kg CO₂</p>
                    <p>Wetsuit Emissions: ${data.wetsuit_kgCO2e} kg CO₂</p>
                    <p>Mid-Length Board Emissions: ${data.midLength_kgCO2e} kg CO₂</p>
                    <p>Shortboard Emissions: ${data.shortboard_kgCO2e} kg CO₂</p>
                    <p>Longboard Emissions: ${data.longboard_kgCO2e} kg CO₂</p>
                    <p>Total Emissions: ${data.totalEmissions_kgCO2e} kg CO₂</p>
                `;
            } catch (error) {
                console.error('Error fetching or processing data:', error);
                document.getElementById('result').innerHTML = `<p>Error calculating emissions: ${error.message}</p>`;
            }
        }

        // Add event listener to the form
        document.getElementById('carbonOffsetForm').addEventListener('submit', handleFormSubmit);
    </script>
</body>

</html>